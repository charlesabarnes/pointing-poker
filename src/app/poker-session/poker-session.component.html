<div>

  <div class="top-card">
    <novo-card>
      <div style="width: 50%;display: inline-block;">
        <novo-form [form]="form" *ngIf="form">
          <div class="novo-form-row">
            <novo-control [form]="form" [control]="nameControl"></novo-control>
          </div>
        </novo-form>
        <div class="action-buttons">
          <button theme="primary" color="negative" icon="times" (click)="clearVotes()">Clear Votes</button>
          <button theme="primary" icon="search" (click)="doShowValues()">Show Votes</button>
        </div>

        <div *ngIf="!spectator" class="point-value-container">
          <h3>Select Point Value</h3>
          <novo-tiles [options]="options" (onChange)="send($event)" [(ngModel)]="selectedPointValue"></novo-tiles>
        </div>

        <div class="point-value-container">
          <h3>Spectator switch</h3>
          <div>
            <span>Spectate</span>
            <novo-switch [(ngModel)]="spectator"></novo-switch>
          </div>
        </div>
      </div>
      <div style="width: 50%;display: inline-block;min-height: 460px;">
        <div>
          <canvas *ngIf="showChart" baseChart
            [data]="{
              labels: pointDistributionChartLabels,
              datasets: [{
                data: pointDistributionChartData,
                backgroundColor: ['#4A89DC', '#8CC152', '#DA4453', '#F6B042', '#2F384F', '#282828', '#662255', '#454EA0']
              }]
            }"
            [options]="pointDistributionChartOptions"
            [type]="pointDistributionChartType"
            [plugins]="pieChartPlugins">
          </canvas>
        </div>
      </div>

    </novo-card>
  </div>


  <div class="mid-cards">
    <novo-card>
      If there is a problem, try refreshing the browser. <br>
      If it still persists make an issue on <a
        href="https://github.com/charlesabarnes/pointing-poker">https://github.com/charlesabarnes/pointing-poker</a>
      <div class="point-list">
        <div class="user-info">
          <div class="player-name">
            <h3>Player</h3>
          </div>
          <div class="point-value">
            <h3>Points</h3>
          </div>
        </div>
        <ng-container *ngFor="let userName of userNames">
          <div class="user-info" *ngIf="pointValues[userName] !== 'disconnect'">
            <div class="player-name">
              <span [ngStyle]="{'font-weight': userName == name ? '900' : '300'}">{{userName}}</span>
            </div>
            <div class="point-value">
              <span *ngIf="showValues">{{pointValues[userName]}}</span><i *ngIf="!showValues" class="bhi-circle"
                [ngStyle]="{'color': pointValues[userName] ? '#8CC152' : '#DA4453'}"></i>
            </div>
          </div>
        </ng-container>
      </div>
    </novo-card>
    <novo-card>
      <div class="tip">
        Chat
      </div>
      <div class="chat">
        <div #scroller class="chat-box">
          <div *ngFor="let chat of chatLog" class="chat-row">
            <span class="name">{{ chat.sender }}</span><span class="text">{{ chat.content }}</span>
          </div>
        </div>
        <novo-form #chatFormRef [form]="chatForm" *ngIf="chatForm" (submit)="sendChat()" autocomplete="off">
          <div class="novo-form-row">
            <novo-control [form]="chatForm" [control]="messageControl"></novo-control>
          </div>
        </novo-form>
      </div>
    </novo-card>
  </div>
</div>