<div class="poker-session-container">
  <!-- Skip to main content link for keyboard navigation -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Main session controls and voting -->
  <section class="top-card" aria-labelledby="session-title">
    <mat-card class="main-session-card">
      <mat-card-header>
        <mat-card-title id="session-title">Planning Poker Session</mat-card-title>
        @if (stateService.showChart()) {
          <div class="chart-type-toggle" role="group" aria-label="Chart type selection">
            <button type="button"
                    [class.active]="chartType() === 'pie'"
                    (click)="setChartType('pie')"
                    aria-label="Pie chart">
              <fa-icon [icon]="faChartPie"></fa-icon>
            </button>
            <button type="button"
                    [class.active]="chartType() === 'bar'"
                    (click)="setChartType('bar')"
                    aria-label="Bar chart">
              <fa-icon [icon]="faChartBar"></fa-icon>
            </button>
            <button type="button"
                    [class.active]="chartType() === 'line'"
                    (click)="setChartType('line')"
                    aria-label="Line chart">
              <fa-icon [icon]="faChartLine"></fa-icon>
            </button>
          </div>
        }
      </mat-card-header>

      <mat-card-content id="main-content">
        <div class="main-content">
          <!-- Story controls and voting section -->
          <section class="left-panel" aria-label="Story and Voting Controls">
            <app-story-controls></app-story-controls>

            <app-voting-panel></app-voting-panel>
          </section>

          <!-- Results visualization section -->
          <aside class="right-panel" aria-label="Voting Results">
            <app-results-chart [chartType]="chartType()"></app-results-chart>
          </aside>
        </div>
      </mat-card-content>
    </mat-card>
  </section>

  <!-- Participants and chat sections -->
  <div class="mid-cards">
    <aside aria-label="Session Participants">
      <app-participants-list [currentUserName]="name"></app-participants-list>
    </aside>
    <aside aria-label="Team Chat">
      <app-chat-panel></app-chat-panel>
    </aside>
  </div>
</div>
